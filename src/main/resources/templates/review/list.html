<!--/* レビュー一覧 */-->

<div th:fragment="reviewList(reviews)">

	<!-- レビューが存在する場合 -->
	<div th:if="${reviews != null and !reviews.isEmpty()}">
		<div th:if="${avgRating != null}">
			平均得点：
			<span class="reviewAvg">[[${#numbers.formatDecimal(avgRating, 1, 1)}]]</span>
			/ 5
		</div>

		<div th:each="review : ${reviews}">
			<div class="room-review-list">

				<div class="room-review-list__contents">
					<div class="stars">
						<span class="score">[[${review.rating}]] 点</span>
						<span th:each="i : ${#numbers.sequence(1, 5)}"
							th:classappend="${i <= review.rating} ? 'star filled' : 'star'">★</span>
					</div>

					<div class="room-review-list__item">
						<div class="review-guest-name">
							<small>[[${review.guest.name}]]</small>
						</div>
						<div>
							<small>投稿日：[[${#temporals.format(review.createdAt, 'yyyy/MM/dd')}]]</small>
						</div>
					</div>
				</div>

				<div class="room-review-list__comment">[[${review.comment}]]</div>

				<!-- 自分のレビューの場合のみ編集・削除 -->
				<div class="review-list-btn" th:if="${@account.id != null and @account.id == review.guest.id}">
					<div>
						<a th:href="@{/reviews/edit/{id}(id=${review.id})}">
							<button type="button" class="review-update">
								<i class="fa-solid fa-pen-to-square"></i>
								編集する
							</button>
						</a>
					</div>
					<div>
						<form th:action="@{/reviews/delete}" method="post" style="display:inline;">
							<input type="hidden" name="reviewId" th:value="${review.id}" />
							<button type="submit" class="review-trash" onclick="return confirm('このレビューを削除しますか？')">
								<i class="fa-solid fa-trash-can"></i>
								削除する
							</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- レビューが存在しない場合 -->
	<p th:if="${reviews == null or reviews.isEmpty()}">まだレビューがありません</p>
</div>