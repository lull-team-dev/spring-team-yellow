<!--/* レビュー一覧 */-->

<div th:fragment="reviewList(reviews)">

	<!-- レビューが存在する場合 -->
	<div th:if="${reviews != null and !reviews.isEmpty()}">
		<p th:if="${avgRating != null}">
			平均評価：
			<span th:text="${#numbers.formatDecimal(avgRating, 1, 1)} + ' / 5'"></span>
		</p>

		<ul>
			<li th:each="review : ${reviews}">
				<p th:text="${review.guest.name}"></p>
				<p th:text="${review.rating} + '★'"></p>
				<small th:text="${#temporals.format(review.createdAt, 'yyyy/MM/dd')}"></small>
				<p th:text="${review.comment}"></p>

				<!-- 自分のレビューの場合のみ編集・削除 -->
				<div th:if="${@account.id != null and @account.id == review.guest.id}">
					<div>
						<a th:href="@{/reviews/edit/{id}(id=${review.id})}">編集する</a>
					</div>
					<div>
						<form th:action="@{/reviews/delete}" method="post" style="display:inline;">
							<input type="hidden" name="reviewId" th:value="${review.id}" />
							<button type="submit" onclick="return confirm('このレビューを削除しますか？')">削除する</button>
						</form>
					</div>
				</div>
			</li>
		</ul>
	</div>

	<!-- レビューが存在しない場合 -->
	<p th:if="${reviews == null or reviews.isEmpty()}">まだレビューがありません</p>
</div>